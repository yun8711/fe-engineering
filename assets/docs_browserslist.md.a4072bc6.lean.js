import{_ as e,v as s,b as o,R as a}from"./chunks/framework.8277b2e6.js";const y=JSON.parse('{"title":"","description":"","frontmatter":{"outline":"deep","prev":false,"next":false},"headers":[],"relativePath":"docs/browserslist.md","filePath":"docs/browserslist.md","lastUpdated":1707235725000}'),t={name:"docs/browserslist.md"},d=a(`<h1>Browserslist</h1><p>v4.21.9（2023-06-15）</p><p><a href="https://github.com/browserslist/browserslist" target="_blank" rel="noreferrer">github</a> | <a href="https://github.com/browserslist/browserslist-example" target="_blank" rel="noreferrer">官方示例</a></p><h2 id="介绍" tabindex="-1">介绍 <a class="header-anchor" href="#介绍" aria-label="Permalink to &quot;介绍&quot;">​</a></h2><p>Browserslist 是一个用于配置支持的浏览器列表的工具，通过Browserslist，开发者可以在项目中明确指定要支持的浏览器版本范围，从而让构建工具（如Webpack等）根据这些限制来做出更好的决策。</p><p>Browserslist不仅可以在前端项目中使用，还可以在Node.js环境下运行的工具中使用。例如，PostCSS、Autoprefixer和babel-env等工具都可以使用 Browserslist 来确定所需的浏览器范围，并自动提供相应的代码转换和 polyfill。</p><h2 id="查询来源" tabindex="-1">查询来源 <a class="header-anchor" href="#查询来源" aria-label="Permalink to &quot;查询来源&quot;">​</a></h2><p>Browserslist 使用 <a href="https://caniuse.com/" target="_blank" rel="noreferrer">Can I Use</a> 网站的数据来查询浏览器版本范围。也提供了在线的查询练习<a href="https://browsersl.ist/" target="_blank" rel="noreferrer">网站</a>。</p><h2 id="配置" tabindex="-1">配置 <a class="header-anchor" href="#配置" aria-label="Permalink to &quot;配置&quot;">​</a></h2><h3 id="优先级" tabindex="-1">优先级 <a class="header-anchor" href="#优先级" aria-label="Permalink to &quot;优先级&quot;">​</a></h3><p>browerslist 将使用如下配置文件限定的的浏览器和 node 版本范围：</p><ol><li>工具 options，例如 Autoprefixer 工具配置中的 browsers 属性。</li><li>BROWERSLIST 环境变量。</li><li>当前目录或者上级目录的browserslist配置文件。</li><li>当前目录或者上级目录的browserslistrc配置文件。</li><li>当前目录或者上级目录的package.json配置文件里面的browserslist配置项（<strong>推荐</strong>）。</li><li>如果上述的配置文件缺失或者其他因素导致未能生成有效的配置，browserslist 将使用默认配置&gt; 0.5%, last 2 versions, Firefox ESR, not dead。</li></ol><br><h3 id="配置方式" tabindex="-1">配置方式 <a class="header-anchor" href="#配置方式" aria-label="Permalink to &quot;配置方式&quot;">​</a></h3><p>（1）在 package.json 中</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#babed8;">{</span></span>
<span class="line"><span style="color:#babed8;">  &quot;browserslist&quot;: [</span></span>
<span class="line"><span style="color:#babed8;">    &quot;last 1 version&quot;,</span></span>
<span class="line"><span style="color:#babed8;">    &quot;&gt; 1%&quot;,</span></span>
<span class="line"><span style="color:#babed8;">    &quot;maintained node versions&quot;,</span></span>
<span class="line"><span style="color:#babed8;">    &quot;not dead&quot;</span></span>
<span class="line"><span style="color:#babed8;">  ]</span></span>
<span class="line"><span style="color:#babed8;">}</span></span></code></pre></div><br><p>（2）.browserslistrc</p><p>在项目根目录下创建<code>.browerslistrc </code>配置文件</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#babed8;"># 注释是这样写的，以#号开头</span></span>
<span class="line"><span style="color:#babed8;">last 1 version</span></span>
<span class="line"><span style="color:#babed8;">&gt; 1%</span></span>
<span class="line"><span style="color:#babed8;">maintained node versions</span></span>
<span class="line"><span style="color:#babed8;">not dead</span></span></code></pre></div><h3 id="差异化配置" tabindex="-1">差异化配置 <a class="header-anchor" href="#差异化配置" aria-label="Permalink to &quot;差异化配置&quot;">​</a></h3><p>可以为不同的环境配置不同的浏览器查询条件。</p><p>Browserslist 将依赖BROWSERSLIST_ENV 或者 NODE_ENV 查询浏览器版本范围。如果两个环境变量都没有配置正确的查询条件，那么优先从 production 对应的配置项加载查询条件，如果再不行就应用默认配置。</p><p>在package.json:</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">browserslist</span><span style="color:#89DDFF;">&quot;</span><span style="color:#BABED8;">: </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">production</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> [</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">&gt; 1%</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ie 10</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#BABED8;">    ]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">development</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> [</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">last 1 chrome version</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">last 1 firefox version</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#BABED8;">    ]</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">}</span></span></code></pre></div><p>在.browserslistrc 中配置：</p><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">[</span><span style="color:#C3E88D;">production staging</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">&gt;</span><span style="color:#BABED8;"> 1%</span></span>
<span class="line"><span style="color:#C3E88D;">ie 10</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#C3E88D;">development</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#C3E88D;">last 1 chrome version</span></span>
<span class="line"><span style="color:#C3E88D;">last 1 firefox version</span></span></code></pre></div><h2 id="配置规则" tabindex="-1">配置规则 <a class="header-anchor" href="#配置规则" aria-label="Permalink to &quot;配置规则&quot;">​</a></h2><h3 id="浏览器" tabindex="-1">浏览器 <a class="header-anchor" href="#浏览器" aria-label="Permalink to &quot;浏览器&quot;">​</a></h3><p>下表将浏览器名称及其目标设备映射到 browserslist 使用的标识符。</p><table><thead><tr><th>浏览器名称</th><th>桌面端</th><th>Android</th><th>iOS</th><th>Other Mobile</th></tr></thead><tbody><tr><td>Android (WebView)</td><td></td><td><code>Android</code></td><td></td><td></td></tr><tr><td>Baidu</td><td><code>Baidu</code></td><td></td><td></td><td></td></tr><tr><td>BlackBerry</td><td></td><td></td><td></td><td><code>BlackBerry</code> <code>bb</code></td></tr><tr><td>Chrome</td><td><code>Chrome</code></td><td><code>ChromeAndroid</code> <code>and_chr</code></td><td>↪️<code>ios_saf</code></td><td></td></tr><tr><td>Edge</td><td><code>Edge</code></td><td>↪️ <code>and_chr</code></td><td>↪️<code>ios_saf</code></td><td></td></tr><tr><td>Electron</td><td><code>Electron</code></td><td></td><td></td><td></td></tr><tr><td>Firefox</td><td><code>Firefox</code> <code>ff</code></td><td><code>FirefoxAndroid</code> <code>and_ff</code></td><td>↪️<code>ios_saf</code></td><td></td></tr><tr><td>Internet Explorer</td><td><code>Explorer</code> <code>ie</code></td><td></td><td></td><td><code>ie_mob</code></td></tr><tr><td>Node.js</td><td><code>Node</code></td><td></td><td></td><td></td></tr><tr><td><a href="https://medium.com/design-at-kai/what-you-didnt-know-about-kaios-browser-53937ea1636" target="_blank" rel="noreferrer">KaiOS Browser</a></td><td></td><td></td><td></td><td><code>kaios</code></td></tr><tr><td>Opera</td><td><code>Opera</code></td><td><code>op_mob</code></td><td>↪️<code>ios_saf</code></td><td></td></tr><tr><td><a href="https://en.wikipedia.org/wiki/Opera_Mini" target="_blank" rel="noreferrer">Opera Mini</a>3</td><td></td><td><code>OperaMini</code></td><td></td><td></td></tr><tr><td><a href="https://en.wikipedia.org/wiki/QQ_browser" target="_blank" rel="noreferrer">QQ browser</a></td><td></td><td><code>and_qq</code></td><td></td><td></td></tr><tr><td>Safari</td><td><code>Safari</code></td><td></td><td><code>iOS</code> <code>ios_saf</code></td><td></td></tr><tr><td>Samsung Internet</td><td></td><td><code>Samsung</code></td><td></td><td></td></tr><tr><td><a href="https://en.wikipedia.org/wiki/UC_Browser" target="_blank" rel="noreferrer">UC Browser</a></td><td></td><td><code>UCAndroid</code> <code>and_uc</code></td><td></td><td></td></tr></tbody></table><ul><li>↪️表示浏览器使用相同的引擎捕获 name</li><li><code>op_mob</code> 约等于 <code>ChromeAndroid</code></li><li>所有 iOS 浏览器都使用 WebKit</li><li>Opera Mini 有“Extreme”和“High”两种数据保存模式。 <code>op_mini</code>目标是“Extreme（极致）”，“High”与普通 Opera Mobile 兼容。</li></ul><br><h3 id="规则列表" tabindex="-1">规则列表 <a class="header-anchor" href="#规则列表" aria-label="Permalink to &quot;规则列表&quot;">​</a></h3><p><a href="https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2#Officially_assigned_code_elements" target="_blank" rel="noreferrer">国家/地区代码</a> | <a href="https://github.com/browserslist/caniuse-lite/tree/main/data/regions" target="_blank" rel="noreferrer">区域代码</a></p><p>可以通过查询指定浏览器和 Node.js 版本（不区分大小写）：</p><ul><li><code>defaults</code>：默认浏览器，即 <code>&gt; 0.5%, last 2 versions, Firefox ESR, not dead</code></li><li>按使用情况： <ul><li><code>&gt; 5%</code>：根据全球使用统计数据选择的浏览器版本，也可以 <code>&gt;=</code>、<code>&lt;</code>、<code>&lt;=</code></li><li><code>&gt; 5% in US</code>：使用美国使用统计数据，这里US代表国家/地区代码</li><li><code>&gt; 5% in alt-AS</code>：使用亚洲地区的使用统计数据，alt-AS 表示区域代码</li><li><code>&gt; 5% in my stats</code>：使用自定义数据</li><li><code>cover 99.5%</code>：提供覆盖范围的最流行的浏览器</li><li><code>cover 99.5% in US</code>：</li><li><code>cover 99.5% in my stats</code>：</li></ul></li><li>最新版本 <ul><li><code>last 2 versions</code>：每个浏览器的最后 2 个版本</li><li><code>last 2 Chrome versions</code>：Chrome 浏览器的最新 2 个版本</li><li><code>last 2 major versions</code>或<code>last 2 iOS major versions</code>：最后 2 个主要版本的所有次要/补丁版本</li></ul></li><li><code>dead</code>：24 个月内没有官方支持或更新的浏览器。现在是<code>IE 11</code>、<code>IE_Mob 11</code>、<code>BlackBerry 10</code>、<code>BlackBerry 7</code>、 <code>Samsung 4</code>以及<code>OperaMobile 12.1</code>的所有版本<code>Baidu</code></li><li>Node.js 版本： <ul><li><code>node 10</code>和<code>node 10.4</code>：选择最新的 Node.js<code>10.x.x</code> 或<code>10.4.x</code>版本。</li><li><code>last 2 node versions</code>：选择 2 个最新的 Node.js 版本</li><li><code>last 2 node major versions</code>：选择 2 个最新的 Node.js 主要版本</li><li><code>current node</code>：Browserslist 目前使用的 Node.js 版本</li><li><code>maintained node versions</code>：所有 Node.js 版本，仍由 Node.js 基金会<a href="https://github.com/nodejs/Release" target="_blank" rel="noreferrer">维护</a></li></ul></li><li>浏览器版本： <ul><li><code>iOS 7</code>：直接使用iOS浏览器版本7。注意，<code>op_mini</code> 有特殊版本<code>all</code>。</li><li><code>Firefox &gt; 20</code>： Firefox 版本高于 20，也可以是 <code>&gt;=</code>，<code>&lt;</code>、<code>&lt;=</code>，也适用于 Node.js</li><li><code>ie 6-8</code>：选择包含的版本范围。</li><li><code>Firefox ESR</code>：最新的<a href="https://support.mozilla.org/en-US/kb/choosing-firefox-update-channel" target="_blank" rel="noreferrer">Firefox 扩展支持版本</a>。</li><li><code>PhantomJS 2.1</code>和<code>PhantomJS 1.9</code>：选择与 PhantomJS 运行时类似的 Safari 版本</li></ul></li><li><code>extends browserslist-config-mycompany\`\`browserslist-config-mycompany</code>：从npm 包中获取查询</li><li><code>supports es6-module</code>：支持特定功能的浏览器。 <code>es6-module</code>这是<a href="https://caniuse.com/" target="_blank" rel="noreferrer">Can I Use</a><code>feat</code>页面URL 上的参数 。所有可用功能的列表可以在 找到 。<a href="https://github.com/ben-eb/caniuse-lite/tree/main/data/features" target="_blank" rel="noreferrer"><code>caniuse-lite/data/features</code></a></li><li><code>browserslist config</code>：Browserslist 配置中定义的浏览器。在差异服务中很有用，可以修改用户的配置，例如 <code>browserslist config and supports es6-module</code>.</li><li><code>since 2015</code>或<code>last 2 years</code>：自 2015 年以来发布的所有版本（还有<code>since 2015-03</code>和<code>since 2015-03-10</code>）。</li><li><code>unreleased versions</code>或者<code>unreleased Chrome versions</code>：alpha 和 beta 版本。</li><li><code>not ie &lt;= 8</code>：从之前的查询中排除 IE 8 及更低版本</li></ul><br><h3 id="最佳实践" tabindex="-1">最佳实践 <a class="header-anchor" href="#最佳实践" aria-label="Permalink to &quot;最佳实践&quot;">​</a></h3><ol><li>只有在特定情况下，才使用 last 2 Chrome versions 这种锁定浏览器品牌的条件</li><li>不要只使用 last n versions 这种配置，会导致添加太多废弃的浏览器兼容代码到项目中，最好加上 not dead，&gt; 1%，这样的限制条件</li><li>根据项目情况和产品用户制定合适的兼容范围，比如：Opera Mini在非洲拥有1亿用户，在全球市场上比微软 Edge 更受欢迎；中文QQ浏览器的市场份额比 Firefox 和桌面Safari更多</li></ol><h2 id="衍生工具" tabindex="-1">衍生工具 <a class="header-anchor" href="#衍生工具" aria-label="Permalink to &quot;衍生工具&quot;">​</a></h2><p>browserslit-ga：该工具能生成访问你运营的网站的浏览器的版本分布数据，以便用于类似&gt; 0.5% in my stats查询条件, 前提是你运营的网站部署有 Google Analytics。</p><p>browserslist-useragent ： 检验某浏览器的user-agent 字符串是否匹配 browserslist 给出的浏览器范围。</p><p>browserslist-useragent-ruby ： 功能同上，ruby 库。</p><p>caniuse-api： 返回支持指定特性的浏览器版本范围</p><p>npx browserslist ：在前端工程目录下运行上面命令，输出当前工程的目标浏览器列表。</p>`,46),l=[d];function r(n,i,c,p,h,b){return s(),o("div",null,l)}const f=e(t,[["render",r]]);export{y as __pageData,f as default};
